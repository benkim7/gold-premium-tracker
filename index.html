<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ê¸ˆ ê¹€ì¹˜ í”„ë¦¬ë¯¸ì—„ ì¶”ì ê¸°</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@2.0.1"></script>
  <style>
    body {
      font-family: 'Noto Sans KR', sans-serif;
      text-align: center;
      margin: 20px;
      background-color: #fafafa;
    }
    #chart-container {
      width: 100%;
      height: 65vh;
      overflow-x: auto;
      overflow-y: hidden;
      white-space: nowrap;
    }
    canvas {
      width: 150%;
      height: 100%;
    }
    #footer {
      font-size: 11px;
      color: gray;
      position: fixed;
      bottom: 8px;
      right: 10px;
    }
  </style>
</head>

<body>
  <h1>ê¸ˆ ê¹€ì¹˜ í”„ë¦¬ë¯¸ì—„ ì¶”ì´</h1>
  <div id="data"></div>

  <div id="chart-container">
    <canvas id="chart"></canvas>
  </div>

  <div id="footer">
    ğŸ“Š ë°ì´í„° ì¶œì²˜:
    <a href="https://metals-api.com" target="_blank">Metals API (êµ­ì œ ê¸ˆ)</a>,
    <a href="https://open.er-api.com" target="_blank">Open ER API (í™˜ìœ¨)</a>,
    <a href="https://apiportal.koreainvestment.com" target="_blank">í•œêµ­íˆ¬ìì¦ê¶Œ (êµ­ë‚´ ê¸ˆ)</a>
  </div>

  <script type="module">
    import { createClient } from "https://esm.sh/@supabase/supabase-js@2";

    const supabaseUrl = "https://ozatkbrmvkhejrbymrvd.supabase.co";
    const supabaseKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im96YXRrYnJtdmtoZWpyYnltcnZkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk2NDMxNTUsImV4cCI6MjA3NTIxOTE1NX0.vxq7FyffhNJwMzoV1c8b6lI25n39X6Tud2oTAiICM5w";
    const supabase = createClient(supabaseUrl, supabaseKey);

    const METALS_KEY = "6w0ly66tw8li4g0hp72mzukci0p1qnheg4o8t3wby5qprrkw3u8rd9lj5gyu";
    let chart;

    async function fetchGoldPrices() {
      try {
